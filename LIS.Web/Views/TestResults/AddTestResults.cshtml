@model IEnumerable<مشروع_ادار_المختبرات.DTOS.RequestViewDto>

@{
    ViewData["Title"] = "إضافة نتائج التحاليل";
}

<h2>@ViewData["Title"]</h2>

@if (Model != null && Model.Any())
{
    <form asp-action="SaveResult" method="post">
        <input type="hidden" name="RequestTestID" value="@Model.First().RequestTestID" />
        <input type="hidden" name="CreatedAt" value="@DateTime.Now.ToString("o")" />
        <input type="hidden" name="RequestID" value="@Model.First().RequestID">
        <table class="table table-bordered table-hover bg-white shadow-sm">
            <thead class="table-primary text-center">
                <tr>
                    
                    <th>رقم التحليل</th>
                    <th>اسم التحليل</th>
                    <th>العينة</th>
                    <th>القيم المرجعية</th>
                    <th style="width:200px;">النتيجة</th>
                </tr>
            </thead>
            <tbody>
                @for(int i = 0; i < Model.First().Tests.Count; i++)
                {
                    var test = Model.First().Tests[i];
                    <tr>
                        <td>@test.TestId
                            <input type="hidden" name="TestId[@i]" value="@test.TestId" />
                        </td>
                        <td>@test.Name</td>
                        <td>@test.Samples</td>
                        <td>@test.Roung</td>
                        <td>
                            <input type="text" name="ResultValue[@i]" class="form-control" placeholder="أدخل النتيجة" />
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <div class="mt-3">
            <button type="submit" class="btn btn-success">حفظ النتائج</button>
            <button type="reset" class="btn btn-secondary">إعادة</button>
        </div>
    </form>
}
else
{
    <p class="text-danger">لا توجد بيانات لإضافة نتائج التحاليل.</p>
}
